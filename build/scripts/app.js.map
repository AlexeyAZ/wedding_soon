{"version":3,"sources":["app.js"],"names":["app","preInit","webshim","setOptions","lazyCustomMessages","replaceValidationUI","polyfill","init","HTML_EL","document","documentElement","BODY","body","FORMS","querySelectorAll","THANKS_LOCATION","name","$","inputmask","greedy","clearIncomplete","setPhoneLinkAction","md","MobileDetect","window","navigator","userAgent","phoneLink","phoneData","getAttribute","mobile","i","length","setAttribute","classList","remove","j","add","hideForm","addEventListener","e","targetClickHandler","event","classes","el","target","elCls","curClass","contains","formAction","closeAllForms","setInputTitle","titleVal","querySelector","innerText","forms","inputTitles","form","formInput","createInputEl","insertBefore","firstElementChild","input","value","createElement","type","wl","callbacks","onFormSubmit","$form","res","data","status","smallFormHandler","def","bigFormHandler","formsHandler","hasAttribute","preventDefault","setInputValues","userInfo","localStorage","getItem","JSON","parse","console","log","checkVal","phone","email","city","val","selfName","find","selfPhone","selfEmail","selfCity","formData","serialize","landUserInfo","setItem","stringify","ajax","url","success","location","closeBigForm","smallFormWrap","bigFormWrap","formsWrap","openSmallForm","openBigForm","callback","closeSmallForm","thanksPageHandler","isThanksPage","setUserName","showSmallForm","smallBtns","smallBtnClick","smallBtn","text"],"mappings":"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","file":"app.js","sourcesContent":["/*global webshim $ wl MobileDetect*/\r\n\r\n\r\nvar app = {\r\n\r\n    preInit: function() {\r\n        \r\n        // form polyfill\r\n        (function() {\r\n            webshim.setOptions('forms', {\r\n                lazyCustomMessages: true,\r\n                replaceValidationUI: true\r\n            });\r\n            webshim.polyfill('forms');\r\n        }());\r\n    },\r\n    \r\n    init: function() {\r\n        \r\n        var HTML_EL = document.documentElement;\r\n        var BODY = document.body;\r\n        var FORMS = document.querySelectorAll(\"form\");\r\n\r\n        var THANKS_LOCATION = \"thanks.html\";\r\n        var name;\r\n\r\n        \r\n\r\n        // form phone input handler\r\n        $(\"input[name=phone]\").inputmask({\r\n            \"mask\": \"+9(999)999-9999\",\r\n            greedy: false,\r\n            clearIncomplete: true\r\n        });\r\n\r\n\r\n        // open form on PC or open app on mobile\r\n        (function setPhoneLinkAction() {\r\n            var md = new MobileDetect(window.navigator.userAgent);\r\n            var phoneLink = document.querySelectorAll('[data-phone]');\r\n            var phoneData = phoneLink[0].getAttribute(\"data-phone\");\r\n\r\n            if(phoneLink) {\r\n\r\n                if (md.mobile()) {\r\n\r\n                    for(var i = 0; i < phoneLink.length; i++) {\r\n                        phoneLink[i].setAttribute(\"href\", \"tel:\" + phoneData);\r\n                        phoneLink[i].classList.remove(\"js-small-btn\");\r\n                    }\r\n                } else {\r\n\r\n                    for(var j = 0; j < phoneLink.length; j++) {\r\n                        phoneLink[j].setAttribute(\"href\", \"\");\r\n                        phoneLink[j].classList.add(\"js-small-btn\");\r\n                    }\r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // close form on click close-btn and background\r\n        (function hideForm() {\r\n\r\n            BODY.addEventListener(\"click\", function(e) {\r\n                targetClickHandler(e, [\"form-wrap\", \"form__close\"]);\r\n            });\r\n\r\n            function targetClickHandler(event, classes) {\r\n                var el = event.target;\r\n                var elCls = el.classList;\r\n\r\n                for (var i = 0; i < classes.length; i++) {\r\n                    var curClass = classes[i];\r\n\r\n                    if (elCls.contains(curClass)) {\r\n                        formAction().closeAllForms();\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // create input with name = title for phpMail handler\r\n        (function setInputTitle() {\r\n            var titleVal = document.querySelector(\"title\").innerText;\r\n            var forms = document.querySelectorAll(\"form\");\r\n            var inputTitles;\r\n            \r\n            for (var i = 0; i < forms.length; i++) {\r\n                var form = forms[i];\r\n                var formInput = createInputEl();\r\n                form.insertBefore(formInput, form.firstElementChild);\r\n            }\r\n\r\n            inputTitles = document.querySelectorAll(\".js-hidden-title\");\r\n\r\n            for (var j = 0; j < inputTitles.length; j++) {\r\n                var input = inputTitles[j];\r\n                input.value = titleVal;\r\n            }\r\n\r\n            function createInputEl() {\r\n                var input = document.createElement(\"input\");\r\n                input.classList.add(\"js-hidden-title\");\r\n                input.name = \"title\";\r\n                input.type = \"hidden\";\r\n                \r\n                return input;\r\n            }\r\n        }());\r\n\r\n        if (typeof wl != \"undefined\") {\r\n\r\n            wl.callbacks.onFormSubmit = function ($form, res) {\r\n                if ($form.data('next')) {\r\n                \r\n                    if(res.status == 200) {\r\n                        smallFormHandler($form);\r\n                    } else {  \r\n                        wl.callbacks.def.onFormSubmit($form, res);\r\n                    }\r\n                } else {\r\n                    bigFormHandler($form);\r\n                }\r\n            };\r\n        } else {\r\n\r\n            formsHandler();\r\n        }\r\n\r\n        // function formsHandler(options) {\r\n        //     var firstForms = options.firstForms;\r\n        //     var secondForm = options.secondForms;\r\n        //     var openFormBtn = options.openFormBtn;\r\n\r\n        //     openFormBtn.addEventListener(\"click\", function() {\r\n\r\n        //     });\r\n\r\n        //     function openSmallForm() {\r\n                \r\n        //     }\r\n        // }\r\n\r\n        function formsHandler() {\r\n\r\n            for(var i = 0; i < FORMS.length; i++) {\r\n                var form = FORMS[i];\r\n\r\n                if (form.hasAttribute(\"data-next\")) {\r\n\r\n                    form.addEventListener(\"submit\", function(e) {\r\n                        e.preventDefault();\r\n\r\n                        smallFormHandler($(form));\r\n                    });\r\n                } else {\r\n                    form.addEventListener(\"submit\", function(e) {\r\n                        e.preventDefault();\r\n\r\n                        bigFormHandler($(form));\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        function setInputValues() {\r\n            var userInfo;\r\n\r\n            if (localStorage.getItem(\"landUserInfo\")) {\r\n                userInfo = JSON.parse(localStorage.getItem(\"landUserInfo\"));\r\n                console.log(userInfo)\r\n            }\r\n            \r\n            document.querySelector('[name=name1]').value = checkVal(userInfo.name);\r\n            document.querySelector('[name=phone1]').value = checkVal(userInfo.phone);\r\n            document.querySelector('[name=email1]').value = checkVal(userInfo.email);\r\n            document.querySelector('[name=city]').value = checkVal(userInfo.city);\r\n\r\n            function checkVal(val) {\r\n\r\n                if (val !== \"\" && val) {\r\n                    return val;\r\n                } else {\r\n                    return \"\";\r\n                }\r\n            }\r\n        }\r\n\r\n        function smallFormHandler(form) {\r\n\r\n            var selfName = form.find(\"input[name=name]\");\r\n            var selfPhone = form.find(\"input[name=phone]\");\r\n            var selfEmail = form.find(\"input[name=email]\");\r\n            var selfCity = form.find(\"input[name=city]\");\r\n\r\n            var formData = form.serialize();\r\n\r\n            var landUserInfo = {\r\n                \"name\": selfName.val(),\r\n                \"phone\": selfPhone.val(),\r\n                \"email\": selfEmail.val(),\r\n                \"city\": selfCity.val()\r\n            }\r\n\r\n            localStorage.setItem(\"landUserInfo\", JSON.stringify(landUserInfo));\r\n\r\n            name = selfName.val();\r\n            \r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"php/send.php\",\r\n                data: formData,\r\n                success: function() {\r\n                    window.location = THANKS_LOCATION;\r\n                }\r\n            });\r\n\r\n            if (name) {\r\n                localStorage.setItem(\"landclientname\", name + \", наши\");\r\n            } else {\r\n                localStorage.setItem(\"landclientname\", \"Наши\");\r\n            }\r\n        }\r\n\r\n        function bigFormHandler(form) {\r\n            var formData;\r\n            formData = form.serialize();\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"php/sendpresent.php\",\r\n                data: formData,\r\n                success: function() {\r\n                    formAction().closeBigForm();\r\n                }\r\n            });\r\n        }\r\n\r\n        function formAction() {\r\n            var smallFormWrap = document.querySelector(\".form-wrap_small\");\r\n            var bigFormWrap = document.querySelector(\".form-wrap_big\");\r\n            var formsWrap = document.querySelectorAll(\".form-wrap\");\r\n\r\n            return {\r\n\r\n                openSmallForm: function() {\r\n                    HTML_EL.classList.add(\"form-open\");\r\n                    smallFormWrap.classList.add(\"form-wrap_open\");\r\n                },\r\n\r\n                openBigForm: function(callback) {\r\n                    HTML_EL.classList.add(\"form-open\");\r\n                    bigFormWrap.classList.add(\"form-wrap_open\");\r\n\r\n                    callback();\r\n                },\r\n\r\n                closeSmallForm: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n                    smallFormWrap.classList.remove(\"form-wrap_open\");\r\n                },\r\n\r\n                closeBigForm: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n                    bigFormWrap.classList.remove(\"form-wrap_open\");\r\n                },\r\n\r\n                closeAllForms: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n\r\n                    for (var i = 0; i < formsWrap.length; i++) {\r\n                        var form = formsWrap[i];\r\n                        form.classList.remove(\"form-wrap_open\");\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // actions on page thanks.html\r\n        (function thanksPageHandler() {\r\n\r\n            if (isThanksPage()) {\r\n                formAction().openBigForm(setInputValues);\r\n                setUserName();\r\n            } else {\r\n                showSmallForm();\r\n            }\r\n\r\n            function isThanksPage() {\r\n\r\n                if ( document.querySelector(\".thanks\") ) {\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // show small form\r\n        function showSmallForm() {\r\n            var smallBtns = document.querySelectorAll(\".js-small-btn\");\r\n            \r\n            var smallBtnClick = function(e) {\r\n                e.preventDefault();\r\n                \r\n                formAction().openSmallForm();\r\n            };\r\n\r\n            if (smallBtns) {\r\n\r\n                for (var i = 0; i < smallBtns.length; i++) {\r\n                    var smallBtn = smallBtns[i];\r\n\r\n                    smallBtn.addEventListener(\"click\", smallBtnClick);\r\n                }\r\n            }\r\n        }\r\n\r\n        function setUserName() {\r\n\r\n            if(localStorage.getItem(\"landclientname\")) {\r\n                $(\"#thanksName\").text(localStorage.getItem(\"landclientname\"));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\napp.preInit();\r\ndocument.addEventListener(\"DOMContentLoaded\", app.init);"]}